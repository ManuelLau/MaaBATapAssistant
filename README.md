<div align="center">

# MaaBA摸头小助手说明文档

</div>

MaaBA摸头小助手是一个简单易用、专注于实现自动化摸头的小工具，**免费开源**、易上手、体积小、占用资源少，基于**图像识别**框架[MaaFramework](https://github.com/MaaXYZ/MaaFramework)进行开发

使用此工具可实现自动化咖啡厅摸头、邀请学生、应用家具预设的功能，解放双手、每天轻松实现最高10次摸头！

- 支持官服、B服、国际服(繁体中文客户端)、日服
- 只支持Windows7及以上平台，其他平台暂无计划

## 下载

点击网页右侧[Releases](https://github.com/ManuelLau/MaaBATapAssistant/releases)按钮，下载文件后解压即可使用

## 准备工作

1. 初次运行可能需要您安装[.net8运行时](https://dotnet.microsoft.com/zh-cn/download/dotnet/8.0)，具体方法还请自行搜索（如果是Win11用户直接点击弹窗安装就可以了）

2. 将模拟器分辨率设置为1280\*720**或更高**的**16:9**的分辨率，例如1920\*1080、2560\*1440等

3. 设置电脑系统时间为东八区时间（暂不支持其他时区，可能后续优化）

4. 设置模拟器路径或者每次在启动任务前手动打开模拟器（暂时只支持连接一个模拟器，默认连接最开始打开的模拟器），并确保在该模拟器上已登录好游戏账号

5. 保持网络连接顺畅，**国际服、日服玩家请确保已开启加速器**

6. 手动将咖啡厅视角拉到最高，移动视角确保尽可能地看到整个咖啡厅，尽量不要摆放遮挡视野的家具在前面

    - 为避免游戏闪退，推荐将游戏内的整理内存功能关闭，路径为菜单-选项-游戏-整理内存(咖啡厅)

7. 如果需要使用“应用家具预设”的功能，还需要事先手动添加好家具预设（注意：请确保2套家具都能达到1号咖啡厅的舒适度上限）

## 使用说明

1. 打开摸头小助手，跳转到设置页面，根据需求选择对应选项。然后回到主页，点击生成任务，再点击启动任务即可

    - 在执行任务的过程中请不要手动操作游戏，以免出现意外情况导致任务卡住或失败
    - 生成任务后，在未启动任务时，还可以手动修改任务执行时间或者删除不想要的任务，以适应您的需求
    - **请注意：修改的时间要符合规则**，否则可能会导致任务无法按预期执行
    - 自动生成任务规则：每个时间段(每个咖啡厅刷新周期即为一个时间段)只会生成一次咖啡厅邀请、应用家具预设的任务，摸头任务会每隔3小时生成一个
    - 启动任务后，下下下个时间段的任务会在咖啡厅刷新时自动生成，无需再手动生成
    - 当前任务执行完毕后，会自动刷新本时间段内后续任务的时间，以确保摸头任务之间间隔至少为3小时

2. 每次执行任务前，请确保游戏画面不要停留在战斗内，否则会无法继续执行。停留在主页、停留在能看到返回主页按钮的画面、游戏还未启动或者游戏在启动的过程中，这些情况都是可以的

3. 关于软件自动更新的功能，使用前请确保网络条件良好。如果下载失败或者下载速度非常缓慢（半小时都没下载完），请选择更换一个下载源再尝试一遍。如果选择从GitHub下载，请使用科学上网的方式后再重启软件进行更新

## 部分设置选项说明

- 咖啡厅邀请序号：从上往下数，暂时只支持5个

- 允许邀请隔壁咖啡厅学生(同一服装)：例如优香(原皮)到访了2号咖啡厅，在1号咖啡厅使用邀请券邀请优香(原皮)

- 允许邀请隔壁咖啡厅学生且更换服装：例如优香(体操服)到访了2号咖啡厅，在1号咖啡厅使用邀请券邀请优香(原皮)

- 允许邀请学生更换服装：例如优香(原皮)到访了1号咖啡厅，在1号咖啡厅使用邀请券邀请优香(体操服)

- 应用家具预设序号：从上往下数，暂时只支持3个

- 自动生成任务避开时间段：左侧填写起始时间，右侧填写结束时间，如果结束时间小于起始时间，则结束时间表示为次日的时间

## 其他说明

- 执行邀请任务时如果检测到邀请券冷却中、邀请规则不符，会自动跳过邀请任务，后续需要自己手动邀请

- 执行邀请前会自动截图弹窗内容，以便查看邀请的是哪个学生，截图最多保存10个。截图存放在同一目录下的images文件夹中

- 好感等级提升的截图存放在同一目录下的images文件夹中，也可以在设置页中点击“打开截图目录”按钮跳转

- 发现重复登录后，如果不选择自动重连，小助手会自动停止挂机任务。后续需要手动启动任务

- 检测到游戏维护时小助手会自动停止任务，维护结束后请记得手动启动任务

- 检测到需要更新客户端时小助手会自动停止任务，请手动更新客户端后再启动任务

## 意见反馈

- [B站](https://www.bilibili.com/read/41406034)

## 致谢

[MaaFramework](https://github.com/MaaXYZ/MaaFramework)：基于图像识别技术的自动化黑盒测试框架

参考项目：[MFAWPF](https://github.com/SweetSmellFox/MFAWPF)(一个基于WPF框架开发的用户界面)

## 附录

- 如何做到尽可能每天10次摸头？提供其中一种思路：
    - 给想要摸头的学生设置精选，其他学生不要设置
    - 在一个咖啡厅内摆放该学生的互动家具(越多越好)，其他的互动家具一个都不放，另一个咖啡厅内不放任何互动家具
    - 保存两个咖啡厅家具到预设中
    - 在小助手中设置邀请任务，例如1号咖啡厅在4:00执行邀请，2号咖啡厅在16:00执行邀请
    - 在小助手中设置应用家具预设任务，例如1号咖啡厅4:00应用有互动家具的预设，2号咖啡厅应用另一个；1号咖啡厅16:00应用无互动家具的预设，2号咖啡厅应用另一个
    - 原理是互动家具能增加学生到访的几率，通过合理摆放互动家具让学生在邀请券刷新好的另外那个咖啡厅到访，多摸一次头然后再邀请过来继续摸头

- 关于精选下的二次排序问题：
    - 如果设置了多个精选，那么在邀请列表中排序似乎是随机的，反正我没弄懂。建议是不要设置过多精选，至多2个
    - 或者自己摸索清楚排序方式(？)